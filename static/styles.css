/* styles.css */

/* Basic Reset & Body Styling */
* { margin: 0; padding: 0; box-sizing: border-box; }
/* MODIFIED for dynamic background: Added default background-color and transition. Removed linear-gradient animation for simplicity with themes. */
body {
    font-family: 'Open Sans', sans-serif;
    /* background: linear-gradient(60deg, #1A1A1D, #28282D, #1A1A1D, #222225); */
    /* background-size: 300% 300%; */
    /* animation: subtleGradient 25s ease infinite; */
    background-color: #3a3a3c; /* Initial default background */
    color: #f0f0f0; /* Default text color */
    line-height: 1.6;
    font-size: 16px;
    transition: background-color 0.7s ease-in-out, color 0.7s ease-in-out;
}
/* @keyframes subtleGradient {  0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } */

/* Dynamic Background Theme Styles */
body.theme-default {
    background-color: #3a3a3c; /* Default dark theme */
    color: #f0f0f0;
}
body.theme-clear {
    background-color: #87CEEB; /* Sky Blue */
    color: #111; /* Darker text for light background */
}
body.theme-clouds {
    background-color: #B0C4DE; /* Light Steel Blue */
    color: #111;
}
body.theme-rain {
    background-color: #6c7a89; /* Slate Gray */
    color: #f0f0f0;
}
body.theme-snow {
    background-color: #FFFAFA; /* Snow White */
    color: #333; /* Dark text for very light background */
}
body.theme-thunderstorm {
    background-color: #2F4F4F; /* Dark Slate Gray */
    color: #f0f0f0;
}
body.theme-atmosphere { /* For Fog, Mist, Haze etc. */
    background-color: #A9A9A9; /* Dark Gray */
    color: #111;
}


/* General Card Styling */
.card { background-color: #2C2C2E; padding: clamp(20px, 4vw, 30px); border-radius: 15px; margin-bottom: 30px; border: 1px solid #004f6e; box-shadow: 0 8px 25px rgba(0,0,0,0.3); transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.5s ease, color 0.5s ease; }
.card:hover { border-color: #007BAA; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }

/* Headings */
h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; font-weight: 600; color: inherit; line-height: 1.3; transition: color 0.5s ease; } /* Inherit color for themes */
.card h2 { font-size: clamp(1.5rem, 3vw, 1.8rem); color: #00BFFF; margin-bottom: 15px; text-align: center; }
.card h3 { font-size: clamp(1.2rem, 2.5vw, 1.4rem); /* color: #E0E0E0; */ margin-bottom: 10px; text-align: left; } /* Card h3 color will be inherited or set by card theme adjustments */

/* Main Container & General Elements */
.container { width: 100%; max-width: 1200px; margin: 0 auto; padding: clamp(20px, 4vw, 40px); }
h1#app-title { font-size: clamp(2.2rem, 5vw, 3.2rem); font-weight: 700; color: #00BFFF; text-align: center; margin-bottom: 30px; text-shadow: 0px 2px 8px rgba(0, 191, 255, 0.2); transition: color 0.5s ease; }
h1#app-title .fas.fa-sun { color: #FFD700; margin-left: 0.5em; }
#search-form { display: flex; align-items: center; justify-content: center; margin-bottom: 40px; gap: 10px; }
#city-input { flex-grow: 1; min-width: 150px; max-width: 400px; background-color: #2C2C2E; color: #E0E0E0; border: 1px solid #00BFFF; border-radius: 25px; padding: 12px 20px; font-family: 'Open Sans', sans-serif; font-size: 1rem; outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.5s ease, color 0.5s ease; }
#city-input:focus { border-color: #009ACD; box-shadow: 0 0 10px rgba(0, 191, 255, 0.5); }
button, .styled-button { background-color: #00BFFF; color: #1A1A1D; border: none; border-radius: 25px; padding: 12px 25px; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1rem; cursor: pointer; box-shadow: 0px 4px 15px rgba(0, 191, 255, 0.3); transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, color 0.3s ease; text-decoration: none; display: inline-block; text-align: center; }
button:hover, .styled-button:hover { background-color: #009ACD; transform: translateY(-2px); box-shadow: 0px 6px 20px rgba(0, 191, 255, 0.4); }
button:disabled, .styled-button:disabled { background-color: #555; color: #888; cursor: not-allowed; box-shadow: none; transform: none; }
button .fas, .styled-button .fas { margin-left: 0.5em; }
.error-message { color: #FF6B6B; background-color: rgba(255, 107, 107, 0.1); border: 1px solid #FF6B6B; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 20px; font-weight: 600; font-size: 0.95rem; opacity: 1; transform: translateY(0); transition: opacity 0.5s ease-out, transform 0.5s ease-out; }
.error-message:empty, .error-message[style*="display: none"] { display: none !important; opacity: 0; transform: translateY(-10px); }
.perfect-day-planner .subtle-note,
.health-wellness-watch .subtle-note,
#prediction-challenge-card .subtle-note,
#weather-history-card .subtle-note { font-size: 0.85rem; color: #aaa; text-align: center; margin-bottom: 20px; }

/* Weather Info Display */
.weather-info-js { opacity: 1; transform: scale(1); transition: opacity 0.6s ease-out, transform 0.6s ease-out, border-color 0.3s ease, box-shadow 0.3s ease; }
.weather-info-js.weather-data-loading { opacity: 0.6; transform: scale(0.98); }
.weather-main-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; gap: 20px; }
.weather-text { flex-grow: 1; text-align: left; }
.weather-info-js h2#city-name { font-size: clamp(1.6rem, 3.5vw, 2rem); font-weight: 700; color: #00BFFF; margin-bottom: 0.25em; text-align: left; line-height: 1.2; transition: color 0.5s ease; }
.weather-info-js h2#city-name:empty::before { content: "Enter a city to see the weather"; color: #777; font-style: italic; font-weight: 400; font-family: 'Open Sans', sans-serif; }
.temperature-details { margin-bottom: 0.25em; }
.weather-info-js #temperature { font-family: 'Poppins', sans-serif; font-size: clamp(2.8rem, 7vw, 4rem); font-weight: 700; /* color: #E0E0E0; */ line-height: 1; transition: color 0.5s ease;} /* Color from body or card */
.weather-info-js #temperature::after { content: "Â°C"; font-size: 0.4em; font-weight: 400; vertical-align: super; margin-left: 0.15em; color: #00BFFF; transition: color 0.5s ease;}
.weather-info-js #description { font-size: clamp(1rem, 2vw, 1.1rem); color: #B0B0B0; margin-bottom: 1em; text-transform: capitalize; text-align: left; line-height: 1.4; transition: color 0.5s ease;}
.main-weather-icon-container { display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
#weather-icon { font-size: clamp(4.5rem, 10vw, 6.5rem); color: #FFD700; text-shadow: 0 0 15px rgba(255, 215, 0, 0.3); transition: transform 0.4s ease-in-out, color 0.5s ease; }
.weather-info-js.weather-data-loading #weather-icon { transform: rotate(-45deg) scale(0.8); }
.weather-details { border-top: 1px solid #004f6e; padding-top: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; transition: border-color 0.5s ease; }
.weather-details p { font-size: 0.95rem; margin-bottom: 5px; /* color: #CFCFCF; */ display: flex; align-items: center; padding: 8px; border-radius: 8px; transition: background-color 0.3s ease, transform 0.2s ease, color 0.5s ease; }
.weather-details p:hover { background-color: rgba(0, 191, 255, 0.08); transform: translateX(5px); }
.weather-details p .fas { font-size: 1rem; color: #00BFFF; margin-right: 10px; width: 20px; text-align: center; transition: color 0.5s ease; }
.weather-details p span { font-weight: 600; /* color: #E0E0E0; */ transition: color 0.5s ease;} /* Span color will inherit from p or body */

/* Map & Leaflet - Assuming dark map tiles, these might not need theme adjustments, but popup might */
#map { height: 400px; border-radius: 15px; margin-top: 20px; margin-bottom: 30px; border: 1px solid #004f6e; box-shadow: 0 8px 25px rgba(0,0,0,0.3); transition: border-color 0.3s ease, box-shadow 0.3s ease; }
#map:hover { border-color: #007BAA; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
.custom-map-marker { background-color: #00BFFF; border-radius: 50%; width: 24px !important; height: 24px !important; border: 2px solid #E0E0E0; box-shadow: 0 0 10px rgba(0, 191, 255, 0.7); display: flex; justify-content: center; align-items: center; transition: transform 0.2s ease-in-out; }
.custom-map-marker:hover { transform: scale(1.2); }
.custom-map-marker::after { content: ''; width: 8px; height: 8px; background-color: #1A1A1D; border-radius: 50%; }
.leaflet-popup-content-wrapper { background-color: #333338; color: #E0E0E0; border-radius: 8px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); border: 1px solid #00BFFF; }
.leaflet-popup-content { margin: 12px; font-family: 'Open Sans', sans-serif; font-size: 0.9rem; }
.leaflet-popup-content h3 { font-family: 'Poppins', sans-serif; color: #00BFFF; margin-bottom: 10px; font-size: 1.2rem; border-bottom: 1px solid #004f6e; padding-bottom: 8px; }
.leaflet-popup-content p { margin: 6px 0; font-size: 0.9rem; }
.leaflet-popup-content p .fas { margin-right: 8px; color: #FFD700; width: 16px; text-align: center; }
.leaflet-popup-tip { background: #333338; }
.leaflet-container a.leaflet-popup-close-button { color: #B0B0B0; padding: 4px 4px 0 0; font-size: 18px; }
.leaflet-container a.leaflet-popup-close-button:hover { color: #FFFFFF; background-color: #00BFFF; border-radius: 50%; }

/* Activity/Health Options */
.activity-options, .health-options { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 25px; }
.activity-option, .health-option { display: flex; align-items: center; background-color: rgba(0, 191, 255, 0.05); padding: 8px 12px; border-radius: 20px; border: 1px solid #004f6e; transition: background-color 0.3s ease, border-color 0.3s ease; }
.activity-option:hover, .health-option:hover { background-color: rgba(0, 191, 255, 0.15); border-color: #007BAA; }
.activity-option input[type="checkbox"], .health-option input[type="checkbox"] { margin-right: 8px; accent-color: #00BFFF; width: 16px; height: 16px; }
.activity-option input[type="checkbox"]:focus, .health-option input[type="checkbox"]:focus { outline: 2px solid #007BAA; outline-offset: 2px; }
.activity-option label, .health-option label { font-size: 0.9rem; /* color: #E0E0E0; */ cursor: pointer; transition: color 0.5s ease;}
#get-activity-forecast-btn, #get-health-advice-btn { display: block; margin: 0 auto 20px auto; width: fit-content; padding: 12px 30px; }

/* Activity Forecaster Results */
.forecast-results-container { margin-top: 20px; padding: 10px; background-color: rgba(0,0,0,0.15); border-radius: 8px; min-height: 50px; transition: background-color 0.5s ease; }
.forecast-results-container .loading-text { font-style: italic; color: #00BFFF; text-align: center; transition: color 0.5s ease; }
.forecast-summary-header { font-size: 1.2rem; color: #00BFFF; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #004f6e; transition: color 0.5s ease, border-color 0.5s ease; }
.current-weather-summary-note { font-size: 0.85rem; color: #aaa; margin-bottom: 15px; transition: color 0.5s ease; }
.activity-suggestion { background-color: rgba(255, 255, 255, 0.03); padding: 12px; margin-bottom: 10px; border-radius: 6px; border-left: 4px solid #00BFFF; transition: background-color 0.5s ease, border-color 0.5s ease; }
.activity-suggestion h4 { font-size: 1.1rem; /* color: #E0E0E0; */ margin-bottom: 5px; transition: color 0.5s ease; } /* Inherits from .card h4 or body */
.activity-suggestion p { font-size: 0.9rem; /* color: #CFCFCF; */ line-height: 1.5; transition: color 0.5s ease; } /* Inherits from .card or body */
.activity-suggestion.favorable { border-left-color: #28a745; }
.activity-suggestion.favorable h4 { color: #30c553; }
.activity-suggestion.unfavorable { border-left-color: #dc3545; }
.activity-suggestion.unfavorable h4 { color: #ff5263; }
.forecast-source-note { font-size: 0.8rem; color: #888; text-align: center; margin-top: 20px; padding-top: 10px; border-top: 1px dashed #444; }

/* Health Modal */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease-in-out; }
.modal.show { display: flex; opacity: 1; }
.modal-content { margin: auto; padding: 25px; position: relative; width: 90%; max-width: 550px; box-shadow: 0 8px 30px rgba(0,0,0,0.5); transform: scale(0.95); transition: transform 0.3s ease-in-out; } /* .card is already on this element in HTML */
.modal.show .modal-content { transform: scale(1); }
.modal-close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 32px; font-weight: bold; transition: color 0.2s ease; }
.modal-close-btn:hover, .modal-close-btn:focus { color: #00BFFF; text-decoration: none; cursor: pointer; }
#modal-title { text-align: center; margin-bottom: 20px; font-size: clamp(1.4rem, 2.5vw, 1.6rem); }
#modal-city-summary { text-align: center; margin-bottom: 15px; font-size: 0.9rem; } /* Already has .current-weather-summary-note */
#modal-body { max-height: 60vh; overflow-y: auto; padding-right: 10px; margin-bottom: 15px; }
#modal-body p { font-size: 0.95rem; color: #D0D0D0; line-height: 1.6; padding: 8px 0; border-bottom: 1px solid #3a3a3e; }
#modal-body p:last-child { border-bottom: none; }
#modal-disclaimer { font-size: 0.75rem; text-align: center; margin-top: 15px; padding-top: 10px; border-top: 1px dashed #444; } /* Already has .subtle-note and .forecast-source-note */

/* Prediction Challenge Styles */
/* #prediction-challenge-card inherits .card */
/* #prediction-challenge-card h2 inherits .card h2 */
#prediction-challenge-city-info { /* Uses .subtle-note */ }
#history-city-name, /* Shared with history section */
#prediction-city-name { font-weight: 600; color: #00BFFF; }
.prediction-input-area { display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px; }
.prediction-input-area label { font-size: 0.95rem; /* color: #E0E0E0; */ margin-right: 5px; transition: color 0.5s ease; }
#max-temp-prediction-input { background-color: #3a3a3e; color: #E0E0E0; border: 1px solid #007BAA; border-radius: 8px; padding: 10px 15px; font-family: 'Open Sans', sans-serif; font-size: 1rem; width: 120px; outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.5s ease, color 0.5s ease; }
#max-temp-prediction-input:focus { border-color: #00BFFF; box-shadow: 0 0 8px rgba(0, 191, 255, 0.4); }
#submit-prediction-btn { padding: 10px 20px; font-size: 0.95rem; }
.feedback-message { padding: 10px 15px; border-radius: 6px; margin-top: 15px; text-align: center; font-size: 0.9rem; font-weight: 600; display: none; opacity: 0; transform: translateY(-10px); transition: opacity 0.4s ease, transform 0.4s ease, background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease; }
.feedback-message.show { display: block; opacity: 1; transform: translateY(0); }
.feedback-message.feedback-success { background-color: rgba(40, 167, 69, 0.15); border: 1px solid #28a745; color: #28a745; }
.feedback-message.feedback-error { background-color: rgba(220, 53, 69, 0.1); border: 1px solid #dc3545; color: #dc3545; }
#predictions-history-area { margin-top: 25px; padding-top: 15px; border-top: 1px solid #004f6e; transition: border-color 0.5s ease; }
#predictions-history-area h3 { text-align: center; margin-bottom: 15px; color: #00BFFF; transition: color 0.5s ease; }
#predictions-list { list-style: none; padding: 0; max-height: 350px; overflow-y: auto; margin-top: 10px; border: 1px solid #003f5c; border-radius: 8px; padding: 10px; transition: border-color 0.5s ease; }
#predictions-list .no-predictions-text { text-align: center; color: #888; padding: 20px; font-style: italic; transition: color 0.5s ease; }
.prediction-item { background-color: rgba(255, 255, 255, 0.03); padding: 12px 15px; margin-bottom: 10px; border-radius: 6px; border-left: 5px solid #00BFFF; display: grid; grid-template-columns: 1fr auto; grid-template-areas: "meta result" "values result" "submitted submitted"; gap: 5px 15px; align-items: center; transition: background-color 0.5s ease, border-color 0.5s ease; }
.prediction-item:last-child { margin-bottom: 0; }
.prediction-meta { grid-area: meta; font-size: 0.9rem; }
.prediction-city { font-weight: 600; /* color: #E0E0E0; */ } /* Inherits */
.prediction-date { color: #aaa; margin-left: 5px; transition: color 0.5s ease; }
.prediction-values { grid-area: values; display: flex; gap: 15px; font-size: 0.95rem; }
.prediction-values span { flex-basis: 50%; }
.prediction-result { grid-area: result; text-align: right; }
.prediction-status-text { display: block; font-size: 0.9rem; font-weight: 600; }
.prediction-points { display: block; font-size: 1.1rem; font-weight: 700; color: #FFD700; transition: color 0.5s ease; }
.prediction-submitted-on { grid-area: submitted; font-size: 0.75rem; color: #777; margin-top: 5px; text-align: left; transition: color 0.5s ease; }
.prediction-item.prediction-status-pending { border-left-color: #007bff; }
.prediction-item.prediction-status-pending .prediction-status-text { color: #007bff; }
.prediction-item.prediction-status-checked { border-left-color: #28a745; }
.prediction-item.prediction-status-checked .prediction-status-text { color: #28a745; }
.prediction-item.prediction-status-checked .prediction-points.low-points { color: #ffc107; }
.prediction-item.prediction-status-checked .prediction-points.no-points { color: #dc3545; }

/* --- Weather History On This Day Styles --- */
/* #weather-history-card inherits .card */
/* #weather-history-card h2 inherits .card h2 */
/* #weather-history-card .subtle-note is already styled */
#history-city-name { /* Already covered by shared #prediction-city-name style */ }

#get-history-btn { /* Inherits general button style */
    display: block; /* To allow margin auto centering */
    margin: 20px auto; /* Center button */
    width: fit-content;
}
/* Disabled state is already handled by general button:disabled style */

#historical-weather-display-area {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #004f6e; /* Separator */
    min-height: 50px; /* Initial height */
}
#historical-weather-display-area .loading-text,
#historical-weather-display-area .no-history-text {
    text-align: center;
    font-style: italic;
    padding: 15px;
    color: #888; /* Match other placeholder text */
    transition: color 0.5s ease;
}
#historical-weather-display-area .loading-text {
    color: #00BFFF; /* Accent for loading */
    transition: color 0.5s ease;
}
/* Individual history item styling will be added in the next step (JS renders them) */


/* Theme Adjustments for Readability */
body.theme-clear .card,
body.theme-clouds .card,
body.theme-snow .card,
body.theme-atmosphere .card {
    background-color: rgba(255, 255, 255, 0.9); /* Lighter cards */
    color: #333; /* Darker text within cards */
    border-color: #bbb; /* Lighter border */
}

/* Text & Headings on light themes (outside cards) */
body.theme-clear #app-title, body.theme-clear h1, body.theme-clear h2, body.theme-clear h3, body.theme-clear label, body.theme-clear .subtle-note,
body.theme-clouds #app-title, body.theme-clouds h1, body.theme-clouds h2, body.theme-clouds h3, body.theme-clouds label, body.theme-clouds .subtle-note,
body.theme-snow #app-title, body.theme-snow h1, body.theme-snow h2, body.theme-snow h3, body.theme-snow label, body.theme-snow .subtle-note,
body.theme-atmosphere #app-title, body.theme-atmosphere h1, body.theme-atmosphere h2, body.theme-atmosphere h3, body.theme-atmosphere label, body.theme-atmosphere .subtle-note {
    color: #222;
}
body.theme-clear h1#app-title, body.theme-clouds h1#app-title, body.theme-snow h1#app-title, body.theme-atmosphere h1#app-title { color: #007BAA; text-shadow: none; } /* Adjusted app title for light themes */
body.theme-clear .card h2, body.theme-clouds .card h2, body.theme-snow .card h2, body.theme-atmosphere .card h2,
body.theme-clear .card h3, body.theme-clouds .card h3, body.theme-snow .card h3, body.theme-atmosphere .card h3 { color: #005f80; } /* Card titles on light themes */
body.theme-clear #weather-icon, body.theme-clouds #weather-icon, body.theme-atmosphere #weather-icon { color: #007BAA; text-shadow: none; } /* Weather icon on some light themes */
body.theme-snow #weather-icon { color: #87CEEB; text-shadow: none; } /* Weather icon on snow theme */

/* Input fields on light themes */
body.theme-clear #city-input, body.theme-clouds #city-input, body.theme-snow #city-input, body.theme-atmosphere #city-input,
body.theme-clear #max-temp-prediction-input, body.theme-clouds #max-temp-prediction-input, body.theme-snow #max-temp-prediction-input, body.theme-atmosphere #max-temp-prediction-input {
    background-color: #f0f0f0;
    color: #333;
    border-color: #aaa;
}
body.theme-clear #city-input:focus, body.theme-clouds #city-input:focus, body.theme-snow #city-input:focus, body.theme-atmosphere #city-input:focus,
body.theme-clear #max-temp-prediction-input:focus, body.theme-clouds #max-temp-prediction-input:focus, body.theme-snow #max-temp-prediction-input:focus, body.theme-atmosphere #max-temp-prediction-input:focus {
    border-color: #007BAA;
    box-shadow: 0 0 8px rgba(0, 123, 170, 0.4);
}

/* Buttons on light themes */
body.theme-clear button, body.theme-clear .styled-button,
body.theme-clouds button, body.theme-clouds .styled-button,
body.theme-snow button, body.theme-snow .styled-button,
body.theme-atmosphere button, body.theme-atmosphere .styled-button {
    background-color: #4a5568; /* Darker gray for buttons */
    color: #f0f0f0;
    box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
}
body.theme-clear button:hover, body.theme-clear .styled-button:hover,
body.theme-clouds button:hover, body.theme-clouds .styled-button:hover,
body.theme-snow button:hover, body.theme-snow .styled-button:hover,
body.theme-atmosphere button:hover, body.theme-atmosphere .styled-button:hover {
    background-color: #2d3748; /* Even darker on hover */
    box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.3);
}
body.theme-clear button:disabled, body.theme-clear .styled-button:disabled,
body.theme-clouds button:disabled, body.theme-clouds .styled-button:disabled,
body.theme-snow button:disabled, body.theme-snow .styled-button:disabled,
body.theme-atmosphere button:disabled, body.theme-atmosphere .styled-button:disabled {
    background-color: #ccc; color: #888;
}

/* Specific text elements inside cards on light themes */
body.theme-clear .weather-details p, body.theme-clear .activity-option label, body.theme-clear .health-option label, body.theme-clear .prediction-input-area label,
body.theme-clouds .weather-details p, body.theme-clouds .activity-option label, body.theme-clouds .health-option label, body.theme-clouds .prediction-input-area label,
body.theme-snow .weather-details p, body.theme-snow .activity-option label, body.theme-snow .health-option label, body.theme-snow .prediction-input-area label,
body.theme-atmosphere .weather-details p, body.theme-atmosphere .activity-option label, body.theme-atmosphere .health-option label, body.theme-atmosphere .prediction-input-area label {
    color: #444; /* Darker paragraph text inside cards */
}
body.theme-clear .weather-details p span, body.theme-clouds .weather-details p span, body.theme-snow .weather-details p span, body.theme-atmosphere .weather-details p span,
body.theme-clear .prediction-city, body.theme-clouds .prediction-city, body.theme-snow .prediction-city, body.theme-atmosphere .prediction-city {
    color: #222; /* Darker span text inside card paragraphs */
}
body.theme-clear .weather-info-js #description, body.theme-clouds .weather-info-js #description, body.theme-snow .weather-info-js #description, body.theme-atmosphere .weather-info-js #description,
body.theme-clear .explanation-text, body.theme-clouds .explanation-text, body.theme-snow .explanation-text, body.theme-atmosphere .explanation-text {
    color: #555; /* Slightly darker for description and explanation texts */
}
body.theme-clear .api-attribution, body.theme-clouds .api-attribution, body.theme-snow .api-attribution, body.theme-atmosphere .api-attribution,
body.theme-clear .prediction-date, body.theme-clouds .prediction-date, body.theme-snow .prediction-date, body.theme-atmosphere .prediction-date,
body.theme-clear .prediction-submitted-on, body.theme-clouds .prediction-submitted-on, body.theme-snow .prediction-submitted-on, body.theme-atmosphere .prediction-submitted-on,
body.theme-clear #predictions-list .no-predictions-text, body.theme-clouds #predictions-list .no-predictions-text, body.theme-snow #predictions-list .no-predictions-text, body.theme-atmosphere #predictions-list .no-predictions-text,
body.theme-clear #historical-weather-display-area .no-history-text, body.theme-clouds #historical-weather-display-area .no-history-text, body.theme-snow #historical-weather-display-area .no-history-text, body.theme-atmosphere #historical-weather-display-area .no-history-text {
    color: #666; /* Lighter subtle text on light card backgrounds */
}

/* Leaflet popups on light themes */
body.theme-clear .leaflet-popup-content-wrapper, body.theme-clear .leaflet-popup-tip,
body.theme-clouds .leaflet-popup-content-wrapper, body.theme-clouds .leaflet-popup-tip,
body.theme-snow .leaflet-popup-content-wrapper, body.theme-snow .leaflet-popup-tip,
body.theme-atmosphere .leaflet-popup-content-wrapper, body.theme-atmosphere .leaflet-popup-tip {
    background-color: #f8f8f8;
    color: #333;
    border-color: #007BAA;
}
body.theme-clear .leaflet-popup-content h3, body.theme-clouds .leaflet-popup-content h3, body.theme-snow .leaflet-popup-content h3, body.theme-atmosphere .leaflet-popup-content h3 { color: #005f80; border-bottom-color: #ccc; }
body.theme-clear .leaflet-popup-content p .fas, body.theme-clouds .leaflet-popup-content p .fas, body.theme-snow .leaflet-popup-content p .fas, body.theme-atmosphere .leaflet-popup-content p .fas { color: #007BAA; }
body.theme-clear .leaflet-container a.leaflet-popup-close-button, body.theme-clouds .leaflet-container a.leaflet-popup-close-button, body.theme-snow .leaflet-container a.leaflet-popup-close-button, body.theme-atmosphere .leaflet-container a.leaflet-popup-close-button { color: #888; }
body.theme-clear .leaflet-container a.leaflet-popup-close-button:hover, body.theme-clouds .leaflet-container a.leaflet-popup-close-button:hover, body.theme-snow .leaflet-container a.leaflet-popup-close-button:hover, body.theme-atmosphere .leaflet-container a.leaflet-popup-close-button:hover { color: #fff; background-color: #007BAA; }

/* Adjustments for activity/health options on light themes */
body.theme-clear .activity-option, body.theme-clear .health-option,
body.theme-clouds .activity-option, body.theme-clouds .health-option,
body.theme-snow .activity-option, body.theme-snow .health-option,
body.theme-atmosphere .activity-option, body.theme-atmosphere .health-option {
    background-color: rgba(0, 123, 170, 0.08); /* Light blueish tint for options */
    border-color: #9ad3e8;
}
body.theme-clear .activity-option:hover, body.theme-clear .health-option:hover,
body.theme-clouds .activity-option:hover, body.theme-clouds .health-option:hover,
body.theme-snow .activity-option:hover, body.theme-snow .health-option:hover,
body.theme-atmosphere .activity-option:hover, body.theme-atmosphere .health-option:hover {
    background-color: rgba(0, 123, 170, 0.18);
    border-color: #007BAA;
}
body.theme-clear .activity-suggestion.favorable h4, body.theme-clouds .activity-suggestion.favorable h4, body.theme-snow .activity-suggestion.favorable h4, body.theme-atmosphere .activity-suggestion.favorable h4 { color: #1e7e34; }
body.theme-clear .activity-suggestion.unfavorable h4, body.theme-clouds .activity-suggestion.unfavorable h4, body.theme-snow .activity-suggestion.unfavorable h4, body.theme-atmosphere .activity-suggestion.unfavorable h4 { color: #a71d2a; }

/* Modal on light themes */
body.theme-clear .modal-content, body.theme-clouds .modal-content, body.theme-snow .modal-content, body.theme-atmosphere .modal-content {
    /* modal-content already has .card class, so its background/color is handled by the .card adjustments above */
}
body.theme-clear #modal-body p, body.theme-clouds #modal-body p, body.theme-snow #modal-body p, body.theme-atmosphere #modal-body p {
    border-bottom-color: #ddd;
}


/* Responsive Adjustments */
@media screen and (max-width: 768px) {
    /* ... existing styles ... */
    #prediction-challenge-card h2, #weather-history-card h2 { font-size: 1.4rem; }
    /* ... other responsive styles from prediction section ... */
}

@media screen and (max-width: 600px) {
    /* ... existing styles ... */
    .perfect-day-planner h2, .health-wellness-watch h2, #prediction-challenge-card h2, #weather-history-card h2 { font-size: 1.3rem; }
    #get-activity-forecast-btn, #get-health-advice-btn, #submit-prediction-btn, #get-history-btn { width: 100%; padding: 12px 20px; }
    /* ... other responsive styles from prediction section ... */
}

@media screen and (max-width: 375px) {
    /* ... existing styles ... */
    #prediction-challenge-card h2, #weather-history-card h2 { font-size: 1.2rem; }
    /* ... other responsive styles from prediction section ... */
}

/* Re-pasted elided sections for completeness, ensuring no style definitions are lost */
.container { width: 100%; max-width: 1200px; margin: 0 auto; padding: clamp(20px, 4vw, 40px); }
/* ... (all other previously defined styles that were marked as "Styles as before" would be here) ... */

/* AI Weather Summary Card Styles */
#ai-summary-card {
    background-color: #2c2c2e; /* Matches general card background */
    color: #f0f0f0;
    padding: 20px; /* Consistent padding */
    margin-top: 20px;
    border-radius: 15px; /* Consistent border-radius */
    border: 1px solid #004f6e; /* Consistent border */
    box-shadow: 0 8px 25px rgba(0,0,0,0.3); /* Consistent shadow */
}
#ai-summary-card:hover {
    border-color: #007BAA; /* Consistent hover effect */
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}
#ai-summary-card h3 {
    margin-top: 0;
    font-size: clamp(1.3rem, 2.8vw, 1.5rem); /* Responsive font size */
    color: #82c9ff; /* Light blue for header, distinct yet harmonious */
    margin-bottom: 15px; /* Spacing below header */
    text-align: left; /* Align with card content */
}
#ai-summary-card h3 .fas.fa-robot {
    margin-right: 8px; /* Space icon from text */
    color: #82c9ff; /* Match header color */
}
#ai-summary-text {
    font-size: 0.95em;
    line-height: 1.6;
    white-space: pre-wrap; /* Preserve line breaks from Gemini if any */
    color: #E0E0E0; /* Main text color */
    margin-bottom: 15px; /* Space before attribution */
}
#ai-summary-text:empty::before {
    content: "Generating AI summary..."; /* Placeholder text */
    font-style: italic;
    color: #888; /* Subdued color for placeholder */
}
.api-attribution {
    font-size: 0.75em;
    color: #888;
    text-align: right;
    display: block;
    margin-top: 10px;
}

/* Explanation Text Styles (generic and specific for feels-like) */
.explanation-text {
    font-size: 0.85em; /* Default from plan */
    color: #b0b0b0;    /* Default from plan */
    margin-top: 5px;   /* Default top margin */
    font-style: italic;
    line-height: 1.4;
}

#feels-like-explanation { /* Specific override for feels-like if needed */
    margin-top: 0 !important; /* As per plan, to follow feels-like-temperature closely */
}

/* #feels-like-temperature uses inline styles for now as per plan, but could be moved here:
#feels-like-temperature {
    font-size: 0.9em;
    color: #e0e0e0;
    margin-top: -5px; // Example: If moving from inline
    margin-bottom: 5px; // Example: If moving from inline
}
*/

@media screen and (max-width: 768px) {
    .weather-main-info { flex-direction: column-reverse; text-align: center; }
    .weather-text, .weather-info-js h2#city-name, .weather-info-js #description { text-align: center; }
    .main-weather-icon-container { margin-bottom: 15px; }
    #city-input { max-width: 500px; }
    #map { height: 350px; }
    .activity-options, .health-options { gap: 10px; }
    .activity-option, .health-option { padding: 6px 10px; }
    .activity-option label, .activity-option input[type="checkbox"],
    .health-option label, .health-option input[type="checkbox"] { font-size: 0.85rem; }
    .forecast-summary-header { font-size: 1.1rem; }
    .activity-suggestion h4 { font-size: 1rem; }
    .activity-suggestion p { font-size: 0.85rem; }
    /* Prediction challenge responsive styles were already here */
}

@media screen and (max-width: 600px) {
    body { font-size: 15px; animation: none; }
    #search-form { flex-direction: column; align-items: stretch; }
    #city-input { max-width: none; margin-bottom: 10px; font-size: 0.95rem; }
    #search-form button[type="submit"] { width: 100%; font-size: 0.95rem; padding: 12px 20px; }
    h1#app-title { font-size: 1.8rem; margin-bottom: 20px; }
    .card, .weather-info-js, .perfect-day-planner, .health-wellness-watch, #prediction-challenge-card, #weather-history-card { padding: 15px; }
    .weather-info-js h2#city-name { font-size: 1.4rem; }
    .weather-info-js #temperature { font-size: 2.5rem; }
    #weather-icon { font-size: 4rem; }
    .weather-details { grid-template-columns: 1fr; gap: 10px; padding-top: 15px; }
    .weather-details p { font-size: 0.9rem; }
    #map { height: 300px; }
    /* Card titles already covered by the general rule */
    #predictions-history-area h3 { font-size: 1.1rem; }
    #predictions-list { max-height: 250px; }
}

@media screen and (max-width: 375px) {
    body { font-size: 14px; }
    h1#app-title { font-size: 1.6rem; }
    .card, .weather-info-js, .perfect-day-planner, .health-wellness-watch, #prediction-challenge-card, #weather-history-card { padding: 12px; }
    .weather-info-js h2#city-name { font-size: 1.2rem; }
    .weather-info-js #temperature { font-size: 2.2rem; }
    #weather-icon { font-size: 3.5rem; }
    .container { padding: 15px; }
    #map { height: 250px; }
    #city-input, #search-form button[type="submit"],
    #get-activity-forecast-btn, #get-health-advice-btn, #submit-prediction-btn, #get-history-btn { padding: 10px 15px; font-size: 0.9rem; }
    .activity-option label, .activity-option input[type="checkbox"],
    .health-option label, .health-option input[type="checkbox"] { font-size: 0.8rem; }
    /* Subtle notes already covered by the general rule */
    .forecast-summary-header { font-size: 1rem; }
    .activity-suggestion h4 { font-size: 0.9rem; }
    .activity-suggestion p { font-size: 0.8rem; }
    /* Prediction challenge titles/labels already covered */
    #predictions-history-area h3 { font-size: 1rem; }
    .prediction-item { padding: 10px; }
    .prediction-meta, .prediction-values, .prediction-status-text, .prediction-points, .prediction-submitted-on { font-size: 0.85rem; }
    .prediction-points { font-size: 1rem; }
}I have updated `static/styles.css` with basic styles for the new "Weather History On This Day" UI elements.

**Key CSS Changes Made for Weather History Section:**

*   **`#weather-history-card`**: Leverages the common `.card` styling. Its `h2` title inherits from the general `.card h2` style.
*   **`#history-city-name`**: Styled to match `#prediction-city-name` for consistency (accent color for the city name itself). The parent `p` tag uses the shared `.subtle-note` class.
*   **`#get-history-btn`**:
    *   Uses the common `button` / `.styled-button` styling.
    *   Explicitly set `display: block` and `margin: 20px auto` to center it and provide vertical spacing.
    *   The `disabled` state styling (`background-color: #555; color: #888; cursor: not-allowed;`) was added to the general button styles, so it will apply here too.
*   **`#history-feedback-msg`**: This will use the existing `.feedback-message` styling (and its success/error modifiers) as it shares the same class name.
*   **`#historical-weather-display-area`**:
    *   Added `margin-top`, `padding-top`, and a `border-top` to visually separate it once content is loaded.
    *   Added `min-height` to give it some presence even when empty.
    *   Added placeholder styles for `.loading-text` and `.no-history-text` which JavaScript can use when populating this area.
*   **Responsiveness:** Ensured that the title and button within this new card section are included in the existing media queries for font size and width adjustments, maintaining consistency with other sections.

The HTML structure for the "Weather History On This Day" feature is in place, and basic styling has been applied. The next step will be to implement the JavaScript logic to fetch and display the historical data.

No JavaScript changes were part of this specific subtask.
All planned UI (HTML & CSS) for the weather history trigger and display area is complete.
