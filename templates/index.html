<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClimaCast</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" referrerpolicy="no-referrer" />
    <!-- Leaflet.js CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
    <div class="container">
        <h1 id="app-title">Welcome to ClimaCast! <i class="fas fa-sun"></i></h1>
        <form id="search-form">
            <input type="text" id="city-input" name="city" placeholder="Enter city name or 'geolocation'" required>
            <button type="submit">Get Weather <i class="fas fa-search"></i></button>
        </form>

        <div class="weather-info-js card">
            <div class="weather-main-info">
                <div class="weather-text">
                    <h2 id="city-name"></h2>
                    <p class="temperature-details"><span id="temperature"></span></p>
                    <p id="description"></p>
                </div>
                <div class="main-weather-icon-container">
                    <i id="weather-icon" class="fas"></i>
                </div>
            </div>
            <div class="weather-details">
                <p><i class="fas fa-tint"></i> Humidity: <span id="humidity"></span>%</p>
                <p><i class="fas fa-tachometer-alt"></i> Pressure: <span id="pressure"></span> hPa</p>
                <p><i class="fas fa-wind"></i> Wind Speed: <span id="wind-speed"></span> m/s</p>
            </div>
        </div>

        <div id="error-message-js" class="error-message" style="display: none;"></div>

        <!-- AI Weather Summary Section -->
        <div id="ai-summary-card" class="card" style="display: none;">
            <h3><i class="fas fa-robot"></i> AI Weather Summary</h3>
            <p id="ai-summary-text"></p>
            <small class="api-attribution">Summary powered by Gemini</small>
        </div>

        <div id="map" class="card"></div>

        <!-- Perfect Day Planner Section -->
        <div class="perfect-day-planner card">
            <h2>Activity Forecaster</h2>
            <p class="subtle-note">Select activities to see if current conditions in the chosen city are favorable.</p>
            <div id="activity-selector" class="activity-options">
                <div class="activity-option"> <input type="checkbox" id="activity-running" name="activity" value="running"> <label for="activity-running">Running</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-cycling" name="activity" value="cycling"> <label for="activity-cycling">Cycling</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-picnic" name="activity" value="picnic"> <label for="activity-picnic">Picnic</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-gardening" name="activity" value="gardening"> <label for="activity-gardening">Gardening</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-stargazing" name="activity" value="stargazing"> <label for="activity-stargazing">Stargazing</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-beach_day" name="activity" value="beach_day"> <label for="activity-beach_day">Beach Day</label> </div>
                <div class="activity-option"> <input type="checkbox" id="activity-hiking" name="activity" value="hiking"> <label for="activity-hiking">Hiking</label> </div>
            </div>
            <button id="get-activity-forecast-btn">Get Activity Advice</button>
            <div id="activity-forecast-results" class="forecast-results-container"></div>
            <div id="activity-forecast-error" class="error-message" style="display: none;"></div>
        </div>
        <!-- End Perfect Day Planner Section -->

        <!-- Health & Wellness Watch Section -->
        <div class="health-wellness-watch card">
            <h2>Health & Wellness Watch (Bangladesh Focus)</h2>
            <p class="subtle-note">Select health concerns to see if current weather conditions might affect them. This is not medical advice.</p>
            <div id="health-concern-selector" class="health-options">
                <div class="health-option"> <input type="checkbox" id="concern-flu" name="health_concern" value="flu_respiratory"> <label for="concern-flu">Flu & Respiratory Issues</label> </div>
                <div class="health-option"> <input type="checkbox" id="concern-heatstroke" name="health_concern" value="heatstroke_exhaustion"> <label for="concern-heatstroke">Heatstroke & Exhaustion</label> </div>
                <div class="health-option"> <input type="checkbox" id="concern-dengue" name="health_concern" value="dengue_risk"> <label for="concern-dengue">Dengue Fever Risk</label> </div>
                <div class="health-option"> <input type="checkbox" id="concern-skin" name="health_concern" value="skin_rashes_allergies"> <label for="concern-skin">Skin Rashes & Allergies</label> </div>
                <div class="health-option"> <input type="checkbox" id="concern-joint" name="health_concern" value="joint_pain_arthritis"> <label for="concern-joint">Joint Pain & Arthritis</label> </div>
            </div>
            <button id="get-health-advice-btn">Get Health Advice</button>
            <div id="health-advice-error" class="error-message" style="display: none;"></div>
        </div>
        <!-- End Health & Wellness Watch Section -->

        <!-- Daily Prediction Challenge Section -->
        <div id="prediction-challenge-card" class="card">
            <h2>Daily Prediction Challenge</h2>
            <p id="prediction-challenge-city-info" class="subtle-note">Predict for: <span id="prediction-city-name">Your current city</span></p> <!-- Added subtle-note class -->
            <div class="prediction-input-area">
                <label for="max-temp-prediction-input">Tomorrow's Max Temp (Â°C):</label>
                <input type="number" id="max-temp-prediction-input" placeholder="e.g., 25">
                <button id="submit-prediction-btn">Submit Prediction</button>
            </div>
            <div id="prediction-feedback-msg" class="feedback-message" style="display: none;"></div>
            <div id="predictions-history-area">
                <h3>Your Predictions:</h3>
                <div id="predictions-list">
                    <!-- Predictions will be listed here by JS -->
                </div>
            </div>
        </div>
        <!-- End Daily Prediction Challenge Section -->

        <!-- Weather History On This Day Section -->
        <div id="weather-history-card" class="card">
            <h2>On This Day in Weather History</h2>
            <p class="subtle-note">See key weather stats for <span id="history-city-name">your current city</span> on this date in previous years.</p>
            <button id="get-history-btn" class="styled-button" disabled>Show Weather History</button>
            <div id="history-feedback-msg" class="feedback-message" style="display: none;"></div>
            <div id="historical-weather-display-area">
                <!-- Historical weather data will be populated here by JS -->
            </div>
        </div>
        <!-- End Weather History On This Day Section -->

    </div>

    <!-- Health Advice Modal -->
    <div id="health-advice-modal" class="modal" style="display: none;">
        <div class="modal-content card">
            <span class="modal-close-btn">&times;</span>
            <h3 id="modal-title">Health & Wellness Advice</h3>
            <div id="modal-city-summary" class="current-weather-summary-note" style="text-align: center; margin-bottom:15px;"></div>
            <div id="modal-body" class="modal-text-content"></div>
            <p id="modal-disclaimer" class="subtle-note forecast-source-note"></p>
        </div>
    </div>
    <!-- End Health Advice Modal -->

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
